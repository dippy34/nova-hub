"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5159,9108],{7598:function(t,i){function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var i=function(t,i){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,i||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}var n=function(){return t=function t(){var i=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.$informationBar=document.querySelector(".policy-validation"),this.$button=document.querySelector(".policy-validation .validate-policy"),this.serviceControl=null,window.addEventListener("privacy_policy_validated",(function(t){i.setControlValueFromService(t.detail.privacy_policy_validated),i.process()}))},(i=[{key:"process",value:function(){var t=this;"true"!=this.getCookie("privacy_policy_validated")?this.serviceControl?this.validateWithCookie():window.showCMP().then((function(i){i||(t.showInformationBar(),null!==t.$button&&t.$button.addEventListener("click",(function(t){t.preventDefault(),window.policyValidator.validate()})))})):!this.serviceControl&&this.getCookie("user_id")&&this.validateWithApi()}},{key:"validate",value:function(){this.getCookie("user_id")?this.validateWithApi():this.validateWithCookie()}},{key:"validateWithCookie",value:function(){document.cookie="privacy_policy_validated=true; max-age=".concat(3456e4,";"),this.hideInformationBar()}},{key:"validateWithApi",value:function(){var t=new XMLHttpRequest;t.onload=function(){t.status>=200&&t.status<300?window.policyValidator.validateWithCookie():console.log("Error on validate privacy policy : ".concat(t.statusText))},t.open("PUT","/profile/validate_privacy_policy"),t.send()}},{key:"showInformationBar",value:function(){null!=this.$informationBar&&(this.$informationBar.style.display="flex")}},{key:"hideInformationBar",value:function(){null!=this.$informationBar&&(this.$informationBar.style.display="none")}},{key:"setControlValueFromService",value:function(t){this.serviceControl=t}},{key:"getCookie",value:function(t){var i;return null===(i=document.cookie.split("; ").find((function(i){return i.startsWith("".concat(t,"="))})))||void 0===i?void 0:i.split("=")[1]}}])&&e(t.prototype,i),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,o}();i.A=n},2291:function(t,i,e){var o=new(e(7598).A);window.policyValidator=o,o.process()}},function(t){var i;i=2291,t(t.s=i)}]);