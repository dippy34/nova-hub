(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5460],{9140:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}n.d(t,{A:function(){return E}});var o=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=$("#unity_webgl_game_url").attr("href"),this.element=t},(t=[{key:"display",value:function(){this.element.setAttribute("src",this.element.getAttribute("data-src"))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function l(e,t,n){return t=c(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,i&&a(n.prototype,i),r&&a(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(o),h=d;n(3899);function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function y(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.parent=this.element.closest(".item-container")},(t=[{key:"display",value:function(){var e=this,t=!1;flowplayer("#"+this.element.id,this.options()).on("load",(function(t,n){new Video("#"+e.element.id)})).on("resume",(function(n,i){t||($.post("/tracking/video_play_count",{item_slug:e.parent.getAttribute("data-slug")}),t=!0)})).on("finish",(function(e,t){t.unload(),$(document).trigger("playNextVideo")}))}},{key:"options",value:function(){var e={key:"$483119889963668,$118640622092553",hlsQualities:!0,autoplay:!1,hlsjs:{maxMaxBufferLength:10,startLevel:-1},clip:{sources:[{type:"application/x-mpegurl",src:this.element.getAttribute("data-src")}]}};return e}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"display",value:function(){if(-1===navigator.userAgent.indexOf("y8")){window.RufflePlayer=window.RufflePlayer||{},window.RufflePlayer.config={openUrlMode:"deny"},console.debug("Loading Ruffle!");var e=document.createElement("script");e.src="https://unpkg.com/@ruffle-rs/ruffle",document.head.appendChild(e)}}}])&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,P(i.key),i)}}function k(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var E=k((function e(t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemLoaders={Html5Loader:o,UnityLoader:h,VideoLoader:p,SwfLoader:b},!t)throw new Error("No item loader is defined");var i=t.getAttribute("data-item-loader");if(!(i in this.itemLoaders))throw new Error("Unknown item loader: ".concat(i));var r=null!==(n=document.getElementById("item-direct-container"))&&void 0!==n?n:document.querySelector(".item-direct-container");return new this.itemLoaders[i](r)}))},1058:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var i=n(9140);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemDisplayManager=t,this.fullscreenContainer=document.querySelector(".fullscreen-container"),this.setup()},t=[{key:"setup",value:function(){var e=this;this.itemDisplayManager.enoughSpaceToBePlayedInFullscreen()?(document.querySelectorAll(".button--maximize, .suggest-fullscreen--action").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),e.fullscreenContainer.requestFullscreen().then((function(){e.render()})).catch((function(e){console.error("Fullscreen request failed",e)}))}))})),document.addEventListener("fullscreenchange",(function(){document.fullscreenElement!==e.fullscreenContainer&&e.exit()}))):document.getElementById("maximize-button").style.display="none"}},{key:"render",value:function(){this.fullscreenContainer.classList.add("fullscreen-mode"),this.itemDisplayManager.loadTheItem(),this.itemDisplayManager.hideSuggestFullScreen()}},{key:"exit",value:function(){this.fullscreenContainer.classList.remove("fullscreen-mode"),this.itemDisplayManager.enoughSpaceToBePlayed()||this.itemDisplayManager.suggestFullScreen()}}],t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"init",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.area=document.querySelector(".item-area"),this.element=null!==(t=document.getElementById("item-container"))&&void 0!==t?t:document.querySelector(".item-container"),this.skinShortName=null!==e&&void 0!==e?e:"y8",this.suggestFullscreenElement=document.getElementById("suggest-fullscreen"),this.screenTooSmallWidth=768,this.loaded=!1,"y8"==this.skinShortName&&(this.view=n),this.fullscreenManager=new a(this)}},{key:"calculAvailableHeightForItem",value:function(){var e,t,n=null!==(e=document.querySelector(".navbar"))&&void 0!==e?e:document.querySelector("header"),i=null!==(t=n&&n.offsetHeight)&&void 0!==t?t:0;return window.innerHeight-i-20}},{key:"getDataAttribute",value:function(e){return this.element.getAttribute("data-item-".concat(e))}},{key:"itemWidth",value:function(){return parseInt(this.getDataAttribute("width"))}},{key:"itemHeight",value:function(){return parseInt(this.getDataAttribute("height"))}},{key:"isResponsive",value:function(){return"true"===this.getDataAttribute("supports-resizing").toLowerCase()}},{key:"enoughSpaceToBePlayed",value:function(){return"y8"!=this.skinShortName||"mobile"===this.view||"VideoLoader"===this.getDataAttribute("loader")||(this.isResponsive()&&window.innerWidth<=this.screenTooSmallWidth?(console.log("desktop screen too small for this responsive game"),!1):!this.isResponsive()&&this.area.offsetWidth<this.itemWidth()?(console.log("game is fixed-size and browser width is too small"),!1):!(!this.isResponsive()&&this.calculAvailableHeightForItem()<this.itemHeight())||(console.log("game is fixed-size and browser height is too small"),!1))}},{key:"enoughSpaceToBePlayedInFullscreen",value:function(){return"y8"!=this.skinShortName||"mobile"===this.view||!!this.isResponsive()||(window.screen.width<this.itemWidth()?(console.log("game do not fit on your screen, game width too large"),!1):window.screen.height<this.itemHeight()?(console.log("game do not fit on your screen, game height too large"),!1):(this.getDataAttribute("loader"),!0))}},{key:"suggestFullScreen",value:function(){document.body.contains(this.suggestFullscreenElement)&&(console.log("suggest to play fullscreen"),this.element.style.display="none",this.suggestFullscreenElement.classList.add("show"))}},{key:"hideSuggestFullScreen",value:function(){this.suggestFullscreenElement.classList.remove("show")}},{key:"warnScreenNotCompatible",value:function(){var e=document.getElementById("screen-not-compatible");document.body.contains(e)&&(console.log("print a message that screen is too small to play this game"),this.element.style.display="none",e.classList.add("show"))}},{key:"loadTheItem",value:function(){if(this.loaded)this.element.style.display="block";else if($(".item-spot").replaceWith(this.element.getAttribute("async_content")),new i.A(this.element).display(),this.loaded=!0,this.element.style.display="block",("mobile"===this.view||window.innerWidth<768)&&this.initRotation(),Tracking.trackTog(),-1!==navigator.userAgent.indexOf("y8")){var e=document.getElementById("item-direct-container");if(this.isResponsive()){e.style.width="100%";var t=this.itemWidth()/this.itemHeight();this.area.style.height=Math.round(e.offsetWidth/t)+"px"}else e.style.width=this.itemWidth(),e.style.height=this.itemHeight()}}},{key:"render",value:function(){document.getElementsByClassName("js-mobile-game-launch").length>0?console.debug("Not loading game just yet"):this.enoughSpaceToBePlayed()?this.loadTheItem():this.enoughSpaceToBePlayedInFullscreen()?this.suggestFullScreen():this.warnScreenNotCompatible()}},{key:"initRotation",value:function(){var e=this;if(this.preferredOrientation=this.element.dataset.orientation,this.preferredOrientation&&"none"!==this.preferredOrientation){this.lastRotationState=null;var t=function(){return e.applyRotation()};window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",(function(){t(),setTimeout(t,120)}),{passive:!0}),t()}}},{key:"isPortrait",value:function(){return window.matchMedia&&window.matchMedia("(orientation: portrait)").matches}},{key:"applyRotation",value:function(){var e=document.getElementById("rotWrap")||this.createRotationWrapper();if(e){var t=this.isPortrait();if(e.style.transform="",e.style.transformOrigin="",e.style.height="100dvh",e.style.width="100dvw",!(t&&"portrait"===this.preferredOrientation||!t&&"landscape"===this.preferredOrientation))return t&&"landscape"===this.preferredOrientation?(e.style.transformOrigin="top left",e.style.transform="rotate(90deg) translateY(-100%)",e.style.height="100dvw",void(e.style.width="100dvh")):t||"portrait"!==this.preferredOrientation?void 0:(e.style.transformOrigin="top left",e.style.transform="rotate(-90deg) translateX(-100%)",e.style.height="100dvw",void(e.style.width="100dvh"))}}},{key:"createRotationWrapper",value:function(){var e=document.getElementById("item-direct-container");if(!e)return null;var t=document.createElement("div");return t.id="rotWrap",e.parentNode.insertBefore(t,e),t.appendChild(e),t}}],t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),c=u},6115:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"init",value:function(){var e=this;this.active=!1,this.$adsDivIDs=["request-play-game-ad"],this.$adsDivIDs.forEach((function(t){document.body.contains(document.getElementById(t))&&(e.active=!0)})),this.active?(console.log("PreRollAdsManager active"),window.addEventListener("message",(function(t){'"CompletedAD"'==JSON.stringify(t.data)&&e.hide()})),document.addEventListener("adDisplayDone",(function(t){e.hide()}))):(console.log("PreRollAdsManager NOT active"),this.dispatchCustomEvent())}},{key:"hide",value:function(){this.$adsDivIDs.forEach((function(e){var t=document.getElementById(e);document.body.contains(t)&&(t.style.display="none")})),this.dispatchCustomEvent()}},{key:"dispatchCustomEvent",value:function(){console.log("dispatching event preRollAdHidden"),event=new Event("preRollAdHidden"),document.dispatchEvent(event)}}])&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();t.A=r},3899:function(){function e(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var n=function(){return t=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=$(t),this.initialBottomPosition=this.$container.position().top+this.$container.outerHeight(!0),this.fakeContainerClassName="fake-container",this.fakeContainer=$("<div>").addClass(this.fakeContainerClassName),this.checkPosition(),this.onScroll()},(n=[{key:"checkPosition",value:function(){if($(window).scrollTop()>this.initialBottomPosition)return 0==$("."+this.fakeContainerClassName).length&&this.$container.before(this.fakeContainer),this.moveToRightCorner();1==$("."+this.fakeContainerClassName).length&&this.fakeContainer.remove(),this.moveToOriginalPosition()}},{key:"moveToRightCorner",value:function(){this.$container.addClass("player-right-corner")}},{key:"moveToOriginalPosition",value:function(){this.$container.removeClass("player-right-corner")}},{key:"onScroll",value:function(){var e=this,t=!1;$(window).on("scroll",(function(){t=!0})),setInterval((function(){t&&(t=!1,e.checkPosition())}),300)}}])&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();window.Video=n}}]);