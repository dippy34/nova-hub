/*! For license information please see 831-099654033aba32197256.js.LICENSE.txt */
(self.webpackChunkapp=self.webpackChunkapp||[]).push([[831,9667],{5785:function(){function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var n=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.processing=!1},(n=[{key:"add",value:function(e,t,n){this.execute(e,{item_id:t},"POST",n)}},{key:"remove",value:function(e,t,n){this.execute(e,null,"DELETE",n)}},{key:"heart",value:function(e,t,n){this.execute(e,{item_id:t},"POST",n)}},{key:"unheart",value:function(e,t,n){this.execute(e,null,"DELETE",n)}},{key:"execute",value:function(e,t,n,r){var o=this;this.request=$.ajax({type:n,url:e,data:t,beforeSend:function(){o.processing=!o.processing},complete:function(e){o.processing=!o.processing},error:function(e){403==e.status&&ID.register()},success:function(e){r(e)}})}}])&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();window.Favorite=n},4413:function(){var e={init:function(){console.debug("[Leaderboard] init called, found containers:",$(".js-idnet-leaderboard-instance").length),$(".js-idnet-leaderboard-instance").each((function(){var e=$(this),t=e.closest(".idnet-leaderboard"),n=$(".js-leaderboard-template",e).html();n||console.warn("[Leaderboard] No .js-leaderboard-template found inside container");var r,o=Handlebars.compile(n||""),a=t.find(".js-idnet-leaderboard-pagination"),i=$(".profile-info").data("account-leaderboard-api-url")||$("body").data("leaderboard-api-url"),c=window.appInfo.accountServiceApiUrls.profileAvatarUrl,u=e.data("load-avatars"),s=e.data("default-avatar"),l=e.data("idnet-app-id")||$("body").data("idnet-app-id"),d=[],f=t.find(".idnet-leaderboard-body"),p=f.length?f:e,h=0,g=e.data("per-page")||10,v=e.data("visible-pages")||8,y={},b="alltime",m="y8_account",w=!1;console.debug("[Leaderboard] Config:",{appId:l,leaderboardApiUrl:i,avatarApiUrl:c,perPage:g,loadAvatars:u,defaultAvatar:s});var L=function(){e.find("abbr.timeago").timeago()},x=function(e,t){var n={appid:l,table:r,page:e,perpage:g,mode:b};console.debug("[Leaderboard] getTable() called with options:",n),ID.GameAPI.Leaderboards.listCustom(n,t)},k=function(e){var t={client_id:l,page:e,per_page:g,period:b};return console.debug("[Leaderboard] getIdnetData() fetching:",t),jQuery.ajax({url:i,data:t,type:"GET",contentType:"text/plain",dataType:"json",beforeSend:function(e){var t="undefined"!==typeof i;return t||console.warn("[Leaderboard] No leaderboardApiUrl defined, aborting request"),t}})},j=function(e){var t=e.find(".member");console.debug("[Leaderboard] Updating avatars for",t.length,"members"),t.each((function(){var e,t=$(this).data("playerid"),n=$(this).find("img");(e=t,console.debug("[Leaderboard] Fetching avatar for",e),jQuery.ajax({url:c.replace(":uid",e),type:"GET",contentType:"text/plain",dataType:"json"})).done((function(e){var r;console.debug("[Leaderboard] Avatar loaded for",t,e),n.attr("src",(r=e.profile.avatar)?r.replace("large","medium"):s)})).fail((function(){console.warn("[Leaderboard] Failed to load avatar for",t)}))}))},P=function(e,t){e.preventDefault(),console.debug("[Leaderboard] Page link clicked:",t,"leaderboardType:",m),"y8_account"==m?S(t):"playtomic"==m&&A(t)},I=function(){"alltime"==b?b="alltime":"last30days"==b?b="month":"last7days"==b?b="week":"today"==b?b="day":"newest"==b&&(b="newest");N(1,(function(e){if(0==e.length)return!1;D(1,e),O(1,e),h=10,a.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:h,visiblePages:v,onPageClick:P}),L()}))},E=function(){_(1,(function(e){if(!e.success)return!1;D(1,e),T(e),h=10,a.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:h,visiblePages:v,onPageClick:P}),L()}))},A=function(e){_(e,(function(t){if(!t.success)return!1;D(e,t),T(t),L()}))},S=function(e){N(e,(function(t){if(0==t.length)return!1;D(e,t),O(e,t),L()}))},T=function(e){d=[],jQuery.each(e.scores,(function(e,t){if(null==t.points)return console.warn("[Leaderboard] Skipping entry with null points:",t),!0;t.points=t.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),t.imageurl=s,d.push(t)})),p.html(""),jQuery.each(d,(function(e,t){p.append(o(t))})),u&&j(p)},O=function(e,t){d=[],jQuery.each(t.data,(function(t,n){n.playerid=n.user.id,n.rank=g*(e-1)+t+1,n.playername=n.user.nickname,n.points=n.score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n.imageurl=s,d.push(n)})),p.html(""),jQuery.each(d,(function(e,t){p.append(o(t))})),u&&j(p)},_=function(e,t){var n=y[b+":"+e];n&&0!=n.length?t(n):x(e,t)},N=function(e,t){var n=y[b+":"+e];n&&0!=n.length?t(n):k(e).done(t)},D=function(e,t){y[b+":"+e]=t};function G(n){w||(w=!0,console.debug("[Leaderboard] Loading leaderboard (".concat(n,")")),function(){console.debug("[Leaderboard] loadLeaderboard triggered");var n={appid:l,page:1,perpage:g};ID.GameAPI.Leaderboards.tables(n,(function(n){if(console.debug("[Leaderboard] tablesData:",n),t.find(".leaderboard-loader").remove(),!n.success)return console.warn("[Leaderboard] tablesData not successful"),t.find(".show-block-leaderboard").hide(),t.hide(),!1;"tables"in n&&0==n.tables.length?(m="y8_account",console.debug("[Leaderboard] Using Idnet leaderboard"),k(1).done((function(t){if(console.debug("[Leaderboard] Idnet data:",t),!t.data||0==t.data.length)return console.warn("[Leaderboard] No Idnet leaderboard data returned"),!1;D(1,t),h=t.data[0].numscores>1?Math.ceil(t.data[0].numscores/g):1,jQuery.each(t.data,(function(t,n){n.playerid=n.user.id,n.rank=t+1,n.playername=n.user.nickname,n.points=n.score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n.imageurl=s,d.push(n),t<g&&(console.debug("[Leaderboard] Rendering top entry:",n),e.append(o(n)))})),u&&j(e),console.debug("[Leaderboard] Finished rendering Idnet leaderboard, total entries:",d.length),I(),L()}))):(m="playtomic",r=n.tables[0],console.debug("[Leaderboard] Using Playtomic leaderboard, table:",r),x(1,(function(t){if(console.debug("[Leaderboard] Playtomic scores:",t),!t.success)return console.warn("[Leaderboard] No success from Playtomic scores"),!1;D(1,t),h=10,jQuery.each(t.scores,(function(t,n){if(null==n.points)return console.warn("[Leaderboard] Skipping entry with null points:",n),!0;n.points>999999999?(n.points=n.points/1e6^0,n.points=n.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m"):n.points>999999?(n.points=n.points/1e3^0,n.points=n.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"k"):n.points=n.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n.imageurl=s,d.push(n),t<g&&e.append(o(n))})),u&&j(e),e.closest(".leaderboard--compact").length||E(),L()}))),L()}))}())}if(t.find(".leaderboard-filter-box select").on("change",(function(){b=$(this).children("option:selected").val(),a.empty(),a.removeData("twbs-pagination"),a.off("page"),"y8_account"==m?I():"playtomic"==m&&E()})),t.find(".idnet-leaderboard-popup-toggle").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.find(".idnet-leaderboard-popup").fadeToggle()})),t.find(".idnet-leaderboard-popup, .close-leaderboard").on("click",(function(){t.find(".idnet-leaderboard-popup").fadeOut()})),t.find(".idnet-leaderboard-popup-inner").on("click",(function(e){e.stopPropagation()})),"IntersectionObserver"in window){var C=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(G("via IntersectionObserver"),t.unobserve(e.target))}))}),{threshold:0}),F=e.closest(".idnet-leaderboard, .leaderboard");F.length||(F=e),C.observe(F[0])}else e[0].getBoundingClientRect().top<window.innerHeight?G("visible immediately"):(console.debug("[Leaderboard] Not visible yet, will auto-load in 2s"),setTimeout((function(){return G("delayed fallback")}),2e3))}))},dealtWithIdnetPanel:function(){$(".toogle-idnet-panel").on("click",(function(e){if(!$("#points-frame").attr("src")){var t=$(".profile-info").data("account-leaderboard-points-url");$("#points-frame").attr("src",t)}e.preventDefault(),e.stopPropagation(),$(".idnet-points-modal").fadeToggle()})),$(".idnet-points-modal .close-modal").on("click",(function(e){$(".idnet-points-modal").fadeOut(),e.preventDefault()}))}};window.IdnetLeaderboard=e},8303:function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new O(r||[]);return a(i,"_invoke",{value:E(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",g="executing",v="completed",y={};function b(){}function m(){}function w(){}var L={};l(L,c,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(_([])));k&&k!==n&&r.call(k,c)&&(L=k);var j=w.prototype=b.prototype=Object.create(L);function P(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}})}function E(t,n,r){var o=p;return function(a,i){if(o===g)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=A(c,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?v:h,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=w,a(j,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:m,configurable:!0}),m.displayName=l(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},P(I.prototype),l(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new I(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(j),l(j,s,"Generator"),l(j,c,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function a(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,u,"next",e)}function u(e){a(i,r,o,c,u,"throw",e)}c(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileAchievements.bind(this)},t=[{key:"getPids",value:(d=i(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n=window.appInfo.accountServiceApiUrls.pidsUrl).replace(":profileId",t),e.next=4,$.get(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"listAllAchievements",value:(l=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.ID.GameAPI.Achievements.listAll({playerids:t},(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"profileAchievements",value:(s=i(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPids(t);case 2:return n=e.sent,e.next=5,this.sdkReady();case 5:return e.next=7,this.playtomicReady();case 7:return e.next=9,this.listAllAchievements(n);case 9:return r=e.sent,e.abrupt("return",this.groupAchievements(r));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"sdkReady",value:(u=i(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.ID?e("resolved"):setTimeout((function(){return e(t.sdkReady())}),200)})));case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"playtomicReady",value:(a=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.ID.GameAPI.init(null,null,(function(){e("resolved")}))})));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"groupAchievements",value:function(e){var t={};if(!e.success)return t;var r,o=n(e.achievements);try{var a=function(){var e=r.value;if(t[e.appid]||(t[e.appid]=[]),t[e.appid].map((function(t){if(t.achievementid==e.achievementid)return!0}))[0])return 1;t[e.appid].push(e)};for(o.s();!(r=o.n()).done;)a()}catch(i){o.e(i)}finally{o.f()}return t}}],t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,a,u,s,l,d}();t.A=s},861:function(){var e=function(){"use strict";var e=window.appInfo.errors.notLoggedInAndNoCaptcha,t=function(e,t,r,o,a){var i=(o=o||[]).concat([{name:"id",value:t},{name:"client_id",value:e},{name:"rating",value:r},{name:"cf-turnstile-response",value:a}]);u(e,t,r),n(i)},n=function(e){$.ajax({url:"/ajax/rate_screenshot",type:"POST",data:e,timeout:1e4,success:o,error:a})},r=function(e){if(e){var t=$("#screenshot-rating-message-"+e);t.length&&(t.fadeIn(),setTimeout((function(){t.fadeOut()}),5e3))}},o=function(e){r("success")},a=function(t,n,o){if(400==t.status){var a=JSON.parse(t.responseText);if(a.error.code)if(a.error.code===e)i();else console.log("Unknown error "+a.error.code)}else r("unknown-error"),"timeout"===n?console.log("Screenshot rating timeout error. Is Y8 Account up?"):console.log("Failed to rate screenshot: ",n)},i=function(){$("#screenshot-rating-captcha-container > form").submit((function(e){e.preventDefault()})),window.RecaptchaV3.triggerAction("screenshot","inline-badge2").then((function(e){c(e)})).catch((function(){console.log("Screenshot rating captcha failed"),r("unknown-error")}))},c=function(e){var n=$("#screenshot-rating-captcha-container > form"),r=n.data("screenshot_id"),o=n.data("client_id"),a=n.data("rating"),c=n.serializeArray(),u=!!e;return console.log("CaptchaInputs: ",c),u?t(o,r,a,c,e):i(),!1},u=function(e,t,n){$("#screenshot-rating-captcha-container > form").data({screenshot_id:t,client_id:e,rating:n})};return{rate:t}}();window.ScreenshotRating=e}}]);