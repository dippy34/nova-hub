(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3302],{4936:function(){var e={init:function(){$("link[rel=alternate].xhr").each((function(){e.trackVisit($(this).attr("href"))}))},trackVisit:function(e){var t=e.includes("/games/"),n="mobile"===appInfo.device,o=null;if(t){if(e.endsWith("/mobile.js"))o=sessionStorage.getItem("referrer");else if(o=document.referrer,sessionStorage.setItem("referrer",o),LocalStorageAccess.clearOldValues("refstore_"),n)return void console.log("on mobile")}else o=document.referrer;var i={screen_width:screen.width,screen_height:screen.height};if(o&&(i.referer=o),window.adsBlocked)return i.ad_blocker=1,void $.get(e,i);fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{method:"HEAD",redirect:"error"}).then((function(){$.get(e,i)})).catch((function(){i.ad_blocker=1,$.get(e,i)}))},trackThumbsDisplay:function(){var e=$("[data-thumbnail-id]"),t=$.map(e,(function(e){return $(e).data("thumbnail-id")}));e.length>0&&t.length>0&&$.post("/ctr/thumbnails_displayed",{"thumbnail_ids[]":t},(function(t){e.each((function(){var e=$(this).data("thumbnail-id");$(this).find("a").on("click",(function(n){n.preventDefault(),window.location.href="/ctr/click_on_game?"+$.param({location:$(this).attr("href"),thumbnail_id:e,hash:t})}))}))})).fail((function(e,t,n){console.debug("CTRTracking",t,e.status)}))},trackTog:function(){var t=$("#item-container").data("item-tog-path");t&&(window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.sendTogRequest(t)})),window.addEventListener("pagehide",(function(){e.sendTogRequest(t)})))},trackingIdPresent:function(){return"undefined"!=typeof trackingId&&!!trackingId},sendTogRequest:function(t){if(e.trackingIdPresent()&&"sendBeacon"in navigator){var n=new FormData;n.append("tracking_id",trackingId),"undefined"!==typeof togUID&&togUID&&n.append("uid",togUID),navigator.sendBeacon(t,n)}}};window.Tracking=e},1816:function(e,t){"use strict";var n;function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$item=$(t),this.labels=n}return t=e,o=[{key:"perform",value:function(e){var t=this;$(".item").each((function(n,o){var i=new t(o,e);i.isFilterable()&&(i.isCompatible()?i.show():i.hide())}))}},{key:"loadSettings",value:function(){return JSON.parse(localStorage.getItem(e.STORAGE_KEY))||{}}},{key:"saveSettings",value:function(t){e.SETTINGS=i(i({},e.SETTINGS),t),localStorage.setItem(e.STORAGE_KEY,JSON.stringify(e.SETTINGS)),document.dispatchEvent(new CustomEvent(e.SETTINGS_UPDATE_EVENT))}}],(n=[{key:"isFilterable",value:function(){var e=this.$item.data("filter");return!!this.filters.includes(e)}},{key:"isCompatible",value:function(){return 0==$(this.itemLabels()).filter(this.labels).length}},{key:"hide",value:function(){this.$item.hide().data("filter",this.filter).attr("data-filter",this.filter)}},{key:"show",value:function(){this.$item.show().removeData("filter").removeAttr("data-filter")}},{key:"itemLabels",value:function(){var e=this.$item.data("label-ids");return void 0==e||""==e?[]:e.split(",")}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();n=u,u.STORAGE_KEY="filterSettings",u.SETTINGS_UPDATE_EVENT="filterSettingsUpdated",u.SETTINGS=n.loadSettings(),t.A=u},8782:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.filters=[],this.triggers=[],this.callbacks=[]},t=[{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.filters.push(e),(n||[]).forEach((function(e){t.triggers.includes(e)||t.triggers.push(e)})),this}},{key:"onComplete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t){var n=!1,o=setTimeout((function(){n||(n=!0,e(),console.log("Filter chain, callback via timeout"))}),t);this.callbacks.push((function(){n||(n=!0,clearTimeout(o),e(),console.log("Filter chain, callback when done"))}))}else this.callbacks.push(e);return this}},{key:"enable",value:function(){var e=this;return $((function(){e.run()})),$(document).on(this.triggers.join(" "),(function(){e.run()})),this}},{key:"run",value:function(){try{this.shouldRun()&&($(".item").show(),this.filters.forEach((function(e){e.perform()})))}finally{this.callbacks.forEach((function(e){e()}))}}},{key:"shouldRun",value:function(){var e=window.document.location.pathname.startsWith("/users");return $(".item").length>0&&!e}}],t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();t.A=i},5114:function(){function e(e,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var n=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},(n=[{key:"init",value:function(){if(1!=this.initialized&&(this.initialized=!0,0!=$("#q").length)){$("#items-search-form").on("submit",(function(e){return"mobile"==window.UserAgent.device.type&&$(this).append('<input type="hidden" name="mobile" value="true">'),!0})),"mobile"==window.UserAgent.device.type&&$(".mobile-search").css("display","block");var e=!1,t=$("#live-search-template").html();$("#q").autocomplete({minLength:3,select:function(e,t){t.item.name&&window.location.assign(itemUrl(t.item))},source:function(t,n){var o={q:t.term,kind:window.LiveSearch.kind()};$.getJSON("/search.json",o,(function(t,o,i){$("body").addClass("search-list"),$("ul.live-search-results").html(""),t.items.length>0?(e=!0,n(t.items)):(e=!1,n(t.featured))}))},response:function(t,n){!e&&n.content&&n.content.unshift({name:null})}}).data("ui-autocomplete")._renderItem=function(e,n){if(!n.name){var o=$("<div>").addClass("no-results").text("Nothing was found, how about those great full games:"),i=$("#q").val();return $("#q").data("initial-input",i),$("<li>").data("empty",null).append(o).appendTo(e)}n.path=window.LiveSearch.itemUrl(n);var r=$(Handlebars.compile(t)(n)),s=e;return $(".live-search-results").length&&((s=$(".live-search-results")).trigger("liveSearchResultsRendered"),s.show()),r.appendTo(s)}}}},{key:"kind",value:function(){return $("#kind").length?$("#kind").val():"game"}},{key:"kindForUrl",value:function(e){return"game"==e&&(e+="s"),e}},{key:"itemUrl",value:function(e){return"/"+window.LiveSearch.kindForUrl(e.kind)+"/"+e.slug}}])&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();window.LiveSearch=new n,document.addEventListener("DOMContentLoaded",(function(){$("#q").on("focus blur",(function(){window.LiveSearch.init(),$(document).trigger("checkOverlayMenus")}))}))},4463:function(e,t){"use strict";var n={init:function(){var e=this;$(document).ready((function(){e.handleClick(),$("#locale-selector-dropdown .locales-container .locale-link."+window.appInfo.currentLocale).addClass("selected"),$(".custom-modal .modal-item__link."+window.appInfo.currentLocale).addClass("selected"),$(".locale-link").on("click",(function(){Cookies.set("_y8_lang",$(this).data("locale"),$.extend(appInfo.commonCookieOptions,{expires:999}));var e=$(this).closest("#locale-selector-dropdown");if(e.length){e.find(".locale-chooser").html($(this).html());var t=document.location.pathname+document.location.search;this.href=this.href.replace(/((https?:\/\/)?[^\/]+).*/,"$1"+t),$(document).trigger("checkOverlayMenus")}})),$(".languages-selector a").on("click",(function(){Cookies.set("_y8_lang",$(this).data("locale"),$.extend(appInfo.commonCookieOptions,{expires:999}));var e=$(this).closest(".sidebar-item--lang");if(e.length){e.find(".sidebar-item__link--chooser").html($(this).html());var t=document.location.pathname+document.location.search;this.href=this.href.replace(/((https?:\/\/)?[^\/]+).*/,"$1"+t)}}))})),$(document).on("topMenu.forceClose",this.close)},open:function(){$("#locale-selector-dropdown .locales-container").fadeToggle(200)},close:function(){$("#locale-selector-dropdown .locales-container").fadeOut(200)},handleClick:function(){$("#locale-selector-dropdown .locale-chooser").not(".js-top-menu").on("click",(function(e){$("#locale-selector-dropdown .locales-container").toggle(),$(document).trigger("checkOverlayMenus"),e.preventDefault(),e.stopPropagation()}))}};t.A=n},7656:function(){"use strict";var e=new function(){var e={appId:null,init:function(){if(e.appId=$("body").data("idnet-app-id"),Cookies.get("logged_in")){if(e.appId)e.getPoints();else if(Cookies.get("user_pid")){var t=Cookies.get("idnet-bonus-score-value"),n=Cookies.get("idnet-bonus-score-last-update")>Date.now()-18e5;t&&n?e.updateUserInfo(Cookies.get("idnet-bonus-score-value")):e.getAllPoints(Cookies.get("user_pid"))}}else e.resetScoreWith(0)},getAllPoints:function(t){if(void 0==t)return!1;$.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"cb",url:window.appInfo.accountServiceApiUrls.profilePointsTotalUrl.replace(":uid",t),error:function(e){logConnectionError(e,"in getPointsFromIdnet")},success:function(t){t&&t.points&&e.updateUserInfo(t.points)}})},getPoints:function(){$.ajax({type:"GET",url:window.appInfo.accountServiceApiUrls.userUrl,xhrFields:{withCredentials:!0},dataType:"json",data:{app_id:e.appId},success:function(t){t&&t.points&&t.points>0&&e.updateUserInfo(t.points),"logged_in"in t&&"keys"in t&&1==t.logged_in&&(-1===$.inArray("1_hour_of_play",t.keys)?-1===$.inArray("10_minutes_of_play",t.keys)?setTimeout((function(){e.savePoints("10_minutes_of_play")}),6e5):setTimeout((function(){e.savePoints("1_hour_of_play")}),36e5):-1===$.inArray("10_minutes_of_play",t.keys)&&setTimeout((function(){e.savePoints("10_minutes_of_play")}),6e5))}})},savePoints:function(t){$.ajax({type:"POST",url:window.appInfo.accountServiceApiUrls.pointsBonusTimerUrl,xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:{app_id:e.appId,key:t},success:function(t){"success"in t&&"finished"in t&&1==t.success&&0==t.finished?(e.getAllPoints(),setTimeout((function(){e.savePoints("1_hour_of_play")}),3e6)):"success"in t&&1==t.success&&e.getAllPoints()}})},updateUserInfo:function(e){0==e||"0"==e?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(e),Cookies.set("idnet-bonus-score-last-update",Date.now(),appInfo.commonCookieOptions),Cookies.set("idnet-bonus-score-value",e,appInfo.commonCookieOptions)},resetScoreWith:function(e){0==e||"0"==points?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(e),Cookies.remove("idnet-bonus-score-last-update",appInfo.commonCookieOptions),Cookies.remove("idnet-bonus-score-value",appInfo.commonCookieOptions)}};return e},t=function(){function t(){this.MAX_HEARTED_ITEMS=window.appInfo.user.maxHeartedItems}return t.prototype.init=function(){if(this.registerHandlers(),!Cookies.get("logged_in"))return this.showUserInfo(!1),$(document).trigger("library-counters-ready",[this.getLibraryCounters()]),void $(document).trigger("user-info-ready");var e,t=$(".animations-active").length?"animations":"games";$.ajax({url:"/ajax/user",data:{kind:t},error:function(e){return logConnectionError(e,"in showLoginData")},success:(e=this,function(t){return e.showUserInfo(t),e.setCSRFTokenHeader(),$(document).triggerHandler("favorites-count",t.my_games_count),$(document).triggerHandler("hearts-count",t.hearts_count),$(document).trigger("library-counters-ready",[t]),$(document).trigger("user-info-ready",[t])})})},t.prototype.setCSRFTokenHeader=function(){return $.ajaxPrefilter((function(e,t,n){if(!e.crossDomain)return n.setRequestHeader("X-CSRF-Token",Cookies.get("gp-csrf-token"))}))},t.prototype.getLibraryCounters=function(){var e,t;$(".animations-active").length?(e=Cookies.get("watched_videos_ids"),t=Cookies.get("liked_videos_ids")):(e=Cookies.get("played_games_ids"),t=Cookies.get("liked_games_ids"));var n={visited_items:0,liked_items:0,recommended_items:0};return e&&(n.visited_items=JSON.parse(e).length,n.recommended_items=n.visited_items>15?200:14*n.visited_items),t&&(n.liked_items=JSON.parse(t).length),n},t.prototype.current_user_id=function(){return Cookies.get("user_id")},t.prototype.showEditButton=function(){var e;return e=$("#toggle-edit-"+this.current_user_id()),this.revealButton(e)},t.prototype.revealButton=function(e){return e.removeClass("hidden")},t.prototype.hideButton=function(e){return e.addClass("hidden")},t.prototype.isMyProfile=function(e){return e===Cookies.get("user_id")},t.prototype.isLoggedIn=function(){return Cookies.get("logged_in")},t.prototype.registerHandlers=function(){var e=this;return $(document).on("favorites-count",(function(t,n){e.setFavoritesCount(n)})),$(document).on("hearts-count",(function(t,n){e.setHeartsCount(n)})),$(document).on("user-logged-in",$.proxy(this.showEditButton,this))},t.prototype.showUserInfo=function(t){if(t&&null!=t&&!1!==t.logged_in){if($("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in, .user-not-logged-in-new").hide(),$(".user_not_logged_in_comments").hide(),$("#profile_picture_box").attr("src",t.my_avatar),$(".profile_picture_box").attr("src",t.my_avatar),$("#username_box").html(t.username),$(".username_box").html(t.username),$(".js-favorites-count").html(t.my_games_count),null!=t.user_pid&&($(".js-favorites-link").attr("href","/users/"+t.user_pid+"/"+t.username),$(".js-edit-picture-link").attr("href","/users/"+t.user_pid+"/"+t.username),$(".header-email nobr").html(t.email)),null!=t.studio_slug){var n=$("#account-menu-link-see-my-studio"),o=n.attr("destination");o&&(n.attr("href",o.replace("my-studio-slug",t.studio_slug)),n.show(),$(".dropdown-item--divider-studio").css("display","block"))}$(".js-favorites-container").show(),$(".user-toggle").prepend("<img src='".concat(t.my_avatar,"' class='avatar' alt='avatar'>")),$("#user_logged_in, .user_logged_in, .user-logged-in, .user-logged-in-new, .header__search, .header__search-btn").show(),$("nav.navbar, .header").addClass("logged"),Cookies.set("user_id",t.user_id,window.appInfo.commonCookieOptions),Cookies.set("user_pid",t.user_pid,window.appInfo.commonCookieOptions),Cookies.set("access_token",t.access_token,window.appInfo.commonCookieOptions);var i=new CustomEvent("privacy_policy_validated",{detail:{privacy_policy_validated:t.privacy_policy_validated}});window.dispatchEvent(i),$(document).trigger("user-logged-in")}else $("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in").css("display","inline-block"),$(".user-not-logged-in-new, .header__search, .header__search-btn").css("display","flex"),$(".user_not_logged_in_comments").show(),Cookies.remove("user_id"),Cookies.remove("access_token");return e.init()},t.prototype.setFavoritesCount=function(e){Cookies.set("favorites_count",e,window.appInfo.commonCookieOptions)},t.prototype.setHeartsCount=function(e){Cookies.set("hearts_count",e,window.appInfo.commonCookieOptions)},t.prototype.getFavoritesCount=function(){return Cookies.get("favorites_count")||0},t.prototype.getHeartsCount=function(){return Cookies.get("hearts_count")||0},t.prototype.canHeart=function(){return this.getHeartsCount()<this.MAX_HEARTED_ITEMS},t}();window.UserInfo=t}}]);